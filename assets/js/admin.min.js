!function(a){function b(){if(0===m)f.css({width:"1%"});else{var a=parseInt(m)/parseInt(n)*100;f.css({width:a+"%"})}"sync"===l?(g.text("Syncing "+parseInt(m)+"/"+parseInt(n)),g.show(),f.show(),j.show(),k.hide(),i.hide(),h.hide()):"pause"===l?(g.text("Syncing paused "+parseInt(m)+"/"+parseInt(n)),g.show(),f.show(),j.hide(),k.show(),i.show(),h.hide()):"error"===l?(g.text("An error occured while syncing"),g.show(),h.show(),k.hide(),i.hide(),j.hide(),f.hide()):"cancel"===l?(g.hide(),f.hide(),j.hide(),k.hide(),i.hide(),h.show()):"finished"!==l&&"noposts"!==l||("noposts"===l?g.text("No posts to sync"):g.text("Sync complete"),f.hide(),j.hide(),k.hide(),i.hide(),h.show(),setTimeout(function(){g.hide()},7e3))}function c(){a.ajax({method:"post",url:ajaxurl,data:{action:"ep_cancel_index",nonce:ep.nonce}})}function d(){a.ajax({method:"post",url:ajaxurl,data:{action:"ep_index",nonce:ep.nonce}}).done(function(a){"sync"===l&&(n=a.data.found_posts,m=a.data.offset,0===a.data.found_posts?a.data.start?(l="noposts",b()):(l="finished",b()):(l="sync",b(),d()))}).error(function(){l="error",b(),c()})}var e=a(document.getElementsByClassName("ep-modules")),f=(a("js-ep-wrap"),a(".progress-bar")),g=a(".sync-status"),h=a(".start-sync"),i=a(".resume-sync"),j=a(".pause-sync"),k=a(".cancel-sync"),l="sync",m=0,n=0;e.on("click",".js-toggle-module",function(b){b.preventDefault();var c=b.target.getAttribute("data-module");a.ajax({method:"post",url:ajaxurl,data:{action:"ep_toggle_module",module:c,nonce:ep.nonce}}).done(function(a){e.find(".ep-module-"+c).toggleClass("module-active")})}),ep.index_meta&&(m=ep.index_meta.offset,n=ep.index_meta.found_posts,0===n?response.data.start?(l="noposts",b()):(l="finished",b()):ep.auto_start_index?(l="sync",d()):(l="pause",b())),h.on("click",function(){l="sync",d()}),j.on("click",function(){l="pause",b()}),i.on("click",function(){l="sync",d()}),k.on("click",function(){l="cancel",b(),c()})}(jQuery);